<!DOCTYPE html>
<html><head>
     
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Palmas a las 8</title>
  
<link rel="stylesheet" type="text/css" href="./resources/csshake-slow.min.css">

<style>
    * {
      margin: 0;
      box-sizing: border-box;
      font-family: sans-serif;
      background: #000
    }

    div#clap {
      height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 20vmin;
      pointer-events: auto;
      cursor: pointer;
      text-decoration: none;
    }
    a#play{
    cursor: pointer;
      text-decoration: none;
    }
  </style>

<script type="text/javascript">

window.onload=function(){
      
    document.getElementById('play').addEventListener('click', function (e) {
        e.preventDefault();
  
        myAudio = document.getElementById('audio'); 

        myAudio.ontimeupdate= function(i) {
            if((this.currentTime / this.duration)>0.99){
                this.currentTime = 2;
                this.play();
            }
        };
    
         if (myAudio.paused) {
            myAudio.play();
            toggleClass(document.getElementById('clap'), 'shake-slow');
        }
        else {
            myAudio.pause();
            toggleClass(document.getElementById('clap'), 'shake-slow');
        }
    });


    function toggleClass(element, tClass) {
        tClass = tClass.replace(/\s/g, "");

        var classes =  element.className;
        element.className = classes.indexOf(tClass) !== -1 
            ? classes.replace(" " + tClass, "")
            : classes + " " + tClass;
    }
}

</script>

</head>
<body>

<audio id="audio" preload="" loop="">
  <source src="./resources/clap.mp3" type="audio/mpeg">
</audio>

<div id="clap" class="shake-constant">
  <a href="#" id="play">üëè</a>
</div>
</body>
</html>